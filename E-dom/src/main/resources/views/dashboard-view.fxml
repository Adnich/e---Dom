<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="controllers.DashboardController"
      stylesheets="@../styles/dashboard-style.css"
      styleClass="dash-root"
      spacing="20"
      maxWidth="Infinity"
      maxHeight="Infinity">

    <!-- HEADER -->
    <HBox alignment="CENTER_LEFT" spacing="12" styleClass="dash-header">
        <VBox spacing="2" HBox.hgrow="ALWAYS">
            <Label text="Pregled sistema" styleClass="dash-title"/>
            <Label text="Brzi pregled ključnih informacija" styleClass="dash-subtitle"/>
        </VBox>
        <Label text="DECEMBAR 2025" styleClass="date-badge"/>
    </HBox>

    <!-- STAT CARDS -->
    <GridPane hgap="16">
        <columnConstraints>
            <ColumnConstraints percentWidth="33.3"/>
            <ColumnConstraints percentWidth="33.3"/>
            <ColumnConstraints percentWidth="33.4"/>
        </columnConstraints>

        <VBox GridPane.columnIndex="0" styleClass="stat-card-modern">
            <Label text="Studenti" styleClass="stat-label-modern"/>
            <Label fx:id="lblStudenti" text="0" styleClass="stat-number-modern"/>
            <Label text="Ukupan broj registrovanih" styleClass="stat-hint-modern"/>
        </VBox>

        <VBox GridPane.columnIndex="1" styleClass="stat-card-modern">
            <Label text="Prijave" styleClass="stat-label-modern"/>
            <Label fx:id="lblPrijave" text="0" styleClass="stat-number-modern"/>
            <Label text="Ukupan broj prijava" styleClass="stat-hint-modern"/>
        </VBox>

        <VBox GridPane.columnIndex="2" styleClass="stat-card-modern stat-card-accent">
            <Label text="Status sistema" styleClass="stat-label-modern"/>
            <Label text="Aktivan" styleClass="stat-number-modern"/>
            <Label text="Sistem operativan" styleClass="stat-hint-modern"/>
        </VBox>
    </GridPane>

    <!-- CONTENT -->
    <HBox spacing="16" VBox.vgrow="ALWAYS">

        <!-- PIE CHART -->
        <VBox spacing="14" styleClass="content-panel chart-panel" HBox.hgrow="ALWAYS">
            <HBox>
                <Label text="Statistika prijava" styleClass="section-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Po statusima" styleClass="mini-badge"/>
            </HBox>

            <PieChart fx:id="pieStatusChart"
                      startAngle="90"
                      labelsVisible="true"
                      legendVisible="true"
                      prefHeight="340"/>
        </VBox>

        <!-- SAŽETI STATUS PANEL -->
        <VBox spacing="10" styleClass="content-panel status-sidebar-compact">

            <Label text="Status prijava" styleClass="section-title"/>

            <GridPane hgap="10" vgap="10">
                <columnConstraints>
                    <ColumnConstraints percentWidth="70"/>
                    <ColumnConstraints percentWidth="30"/>
                </columnConstraints>

                <Label text="Na pregledu" GridPane.rowIndex="0"/>
                <Label fx:id="lblNaPregledu" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <Label text="Odobrene" GridPane.rowIndex="1"/>
                <Label fx:id="lblOdobrene" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <Label text="Odbijene" GridPane.rowIndex="2"/>
                <Label fx:id="lblOdbijene" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                <Label text="Bez bodova" GridPane.rowIndex="3"/>
                <Label fx:id="lblBezBodova" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                <Label text="Zaključene" GridPane.rowIndex="4"/>
                <Label fx:id="lblZakljucene" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
            </GridPane>
        </VBox>
    </HBox>

    <HBox spacing="12" styleClass="action-bar">
        <Button text="Pregled prijava"
                styleClass="btn-primary"
                onAction="#goPrijave"/>

        <Button text="Pregled studenata"
                styleClass="btn-accent"
                onAction="#goStudenti"/>

        <Region HBox.hgrow="ALWAYS"/>
        <Label text="E-Dom Admin" styleClass="footer-text"/>
    </HBox>

</VBox>
